---
show: step
version: 1.0
enable_checker: true
---

# æŠ˜å ç»†èŠ‚

## å›å¿†ä¸Šæ¬¡
- ä¸Šæ¬¡æˆ‘ä»¬è®²çš„æ˜¯æŠ˜å 
- æŠ˜å æœ‰å¾ˆå¤šoptions
	- `foldlevel` - æ˜¾ç¤ºæŠ˜å å±‚æ¬¡
	- `foldcolumn` - æŠ˜å æ ‘å®½åº¦
	- `foldmethod` - æŠ˜å æ–¹å¼
		- `manual` - æ‰‹åŠ¨
		- `indent` - ç¼©è¿›
- æŠ˜å çš„å®šä¹‰
	- `zf2j`
		- å½“å‰è¡Œå’Œä¸‹é¢ä¸¤è¡Œå»ºç«‹æŠ˜å 
	- `zfa{`
		- ç”¨å¤§æ‹¬å·(åŒ…å«)å»ºç«‹æŠ˜å 
	- `zfi{`
		- ç”¨å¤§æ‹¬å·(ä¸åŒ…å«)å»ºç«‹æŠ˜å 
- æŠ˜å çš„åˆ é™¤
	- `zd`
- æŠ˜å çš„æ‰“å¼€å’Œå…³é—­
	- `zo` open
	- `zc` close
	- `:set foldlevel=1` è®¾ç½®æŠ˜å å±‚æ¬¡
- è¿™ä¸ªç¼©è¿›æŠ˜å å¯ä»¥å¯¹äºç¨‹åºæ–‡ä»¶ä½¿ç”¨ä¹ˆï¼ŸğŸ¤”
	- åŠ¨æ‰‹è¯•è¯•ï¼

### æ‰“å¼€`oeasy.java`
- è®¾ç½®å’ŒæŸ¥çœ‹å±æ€§
- æŠ˜å çš„options
	- `foldmethod` è®¾ç½®ä¸º
		- indent - ç¼©è¿›
	- `foldcolumn` æŠ˜å æ ‘è®¾ç½®ä¸º
		- 4åˆ—
		- `:set foldcolumn=4`
	- `foldlevel`æŠ˜å å±‚æ¬¡
		- è®¾ç½®ä¸º0 æŠ˜å æ•´ä¸ªclass
		- è®¾ç½®ä¸º1 æŠ˜å å„ä¸ªå‡½æ•°
		- è®¾ç½®ä¸º2 å…¨éƒ¨æ‰“å¼€
		- é»˜è®¤è®¾ç½®ä¸º99 å…¨éƒ¨æ‰“å¼€
	- `:set foldopen=all` ä¹Ÿå¯ä»¥ç›´æ¥æ‰“å¼€æ‰€æœ‰æŠ˜å 
	- `:set foldclose=all` å¯ä»¥ç›´æ¥å…³é—­æ‰€æœ‰æŠ˜å 
- ä½†æ˜¯è¿™ä¸ªä¸œè¥¿æœ‰å¿«æ·é”®ä¹ˆï¼Ÿ

### zrå’Œzm

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210724-1627089385277)

- `zr`
	- `z`æ˜¯æŠ˜å 
	- `r`æ˜¯`reduce` 
	- è®©æŠ˜å å±‚æ¬¡`fold level`å‡`1`
	- `zR` æ‰€æœ‰çš„æŠ˜å éƒ½æ‰“å¼€
- zm 
	- `z`æ˜¯æŠ˜å 
	- `m`æ˜¯`more`
	- è®©æŠ˜å å±‚æ¬¡`fold level`åŠ `1`
	- `zM `æ‰€æœ‰çš„æŠ˜å éƒ½å…³é—­
- å’Œ`zo`ã€`zc`åŒºåˆ«
	- `zo`ã€`zc`ä»…å¯¹å½“å‰è¡Œèµ·ä½œç”¨
	- `zr`ã€`zm`å¯¹æ‰€æœ‰æ–‡å­—èµ·ä½œç”¨
- å¦‚æœæˆ‘æƒ³å¯¹äºæŸäº› `{range}` èµ·ä½œç”¨ï¼Œå¯ä»¥ä¹ˆï¼Ÿ

### foldopenã€foldcloseå‘½ä»¤

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210724-1627089437415)

- åŠ ä¸Šï¼çš„ç›®çš„æ˜¯å½»åº•é€’å½’åœ°æŠ˜å æ‰€æœ‰ï¼Œèƒ½æŠ˜åˆ°å“ªé‡ŒæŠ˜åˆ°å“ªé‡Œ
- `:.foldopen`
	- å½“å‰è¡Œæ‰“å¼€æŠ˜å  `zo`
- `:%foldclose`
	- æ‰€æœ‰éƒ½å…³é—­æŠ˜å  `zc`
- `:1,15foldopen`
	- 1,15è¡Œéƒ½æŠ˜å  `zc`
- `:33,Gfoldclose!`
	- 33åˆ°æœ€åä¸€è¡Œå½»åº•æŠ˜å 	`zC`

### æ›´å¤šæŠ˜å æ–¹æ³•
- æˆ‘ä»¬å¯ä»¥`h foldmethod`æ¥è§‚å¯Ÿä¸€ä¸‹

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210724-1627090116304)


- æŠ˜å çš„æ¨¡å¼æ€»å…±æœ‰6ç§
	- æ‰‹åŠ¨ -  `manual`
	- ç¼©è¿› -  `indent`
	- è¡¨è¾¾å¼ - `expr`
	- æ ‡è®° - `marker`
	- è¯­æ³• - `syntax`
	- å·®å¼‚ - `diff`
- è¿™é‡Œé¢å°±æ˜¯ `indent` æœ€å¥½ç”¨
- å¸®åŠ©æ‰‹å†Œä¸­çš„è¶…é“¾æ¥
	- ç”¨<kbd>ctrl</kbd>+<kbd>]</kbd>è·³å…¥
	- ç”¨<kbd>ctrl</kbd>+<kbd>o</kbd>è·³å…¥

### è¡¨è¾¾å¼æŠ˜å 

- é¦–å…ˆè®¾ç½®æŠ˜å æ–¹æ³•ä¸ºè¡¨è¾¾å¼
	- `:set foldmethod=expr`
- æ˜¾ç¤ºå‡ºç©ºå‡ºæ¥çš„ç¼©è¿›ç©¶ç«Ÿæ˜¯tabè¿˜æ˜¯ç©ºæ ¼
	- `:set listchars=eol:$,tab:>-,space:_`
- ç„¶åè®¾ç½®å„ç§è¡¨è¾¾å¼

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211124-1637750990192)

### è®¾ç½®

- `:set foldexpr=getline(v:lnum)[0]== \"\\t\"`
	- åªè¦è¿™ä¸€è¡Œçš„ç¬¬0ä¸ªå…ƒç´ æ˜¯`"\t"`
	- ä½†æ³¨æ„åŒå¼•å·å’Œåæ–œæ éƒ½éœ€è¦è½¬ä¹‰
	- ä¹Ÿå°±æ˜¯tabé”®
	- é‚£ä¹ˆè¿™è¡Œå°±è¿›å…¥æŠ˜å èŒƒå›´

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211124-1637751080756)

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211124-1637751092315)

### ç©ºè¡Œä½œä¸ºè¡¨è¾¾å¼

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211124-1637751928369)

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211124-1637751939460)

- ä¸‹é¢è¿™ä¸¤æ¡å·®ä¸å¤š
	- `:set foldexpr=getline(v:lnum)=~'^\\s*$'&&getline(v:lnum+1)=~'\\S'?'<1':1`
	- `:set foldexpr=getline(v:lnum-1)=~'^\\s*$'&&getline(v:lnum)=~'\\S'?'>1':1`
- éƒ½å¯ä»¥æŠŠæŠŠç©ºè¡Œåˆ†å‰²å¼€çš„æ®µè½éƒ½æŠ˜å èµ·æ¥
	- åé¢çš„æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼
	- ä¸Šä¸€è¡Œä¸æ˜¯ç©ºè¡Œå¹¶ä¸”ä¸Šä¸€è¡Œæœ‰éç©ºå­—ç¬¦é‚£è¡¨è¾¾å¼å°±æ˜¯1

### å…³äºè¡¨è¾¾å¼çš„è®¡ç®—

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211124-1637760904522)

- `:set foldexpr=getline(v:lnum-1)=~'^\\s*$'&&getline(v:lnum)=~'\\S'?'>1':1`
	- `:set foldexpr=`åé¢çš„æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼
	- ä¸Šä¸€è¡Œä¸æ˜¯ç©ºè¡Œå¹¶ä¸”ä¸Šä¸€è¡Œæœ‰éç©ºå­—ç¬¦é‚£è¡¨è¾¾å¼å°±æ˜¯1
	- è¿™ä¸ª1å°±æ˜¯æŠ˜å çš„å±‚æ¬¡

### è¯­æ³•ç¼©è¿›
- è¿™ä¸ªæ¯”è¾ƒå¤æ‚
- è¦è®¾ç½®å…·ä½“çš„ç¼©è¿›è§„åˆ™çš„è¯­æ³•æ–‡ä»¶
- ä½†æ˜¯ä¸€æ—¦è®¾ç½®å¥½äº†ä¹‹å
- å°±ä¸€åŠ³æ°¸é€¸äº†
- ä¸€èˆ¬å¸¸ç”¨çš„è¯­è¨€éƒ½æœ‰ç°æˆçš„syntax.vim
- ä½†æ˜¯æˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå·±å°è¯•

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211124-1637762283794)

### è®¾ç½®è¯­æ³•æŠ˜å 

- `:syn sync fromstart`
- `:set foldmethod=syntax`
-  `:syn region myFold start="{" end="}" transparent fold`
- ç”±äºè¿™ä¸ªç±»æœ‰ä¸¤å±‚å¤§æ‹¬å·
- æ‰€ä»¥è¢«åˆ†æˆäº†ä¸¤çº§æŠ˜å 

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211124-1637762379199)

- foldnestmaxå¯ä»¥æ§åˆ¶æœ€å¤§å±‚æ•°


### æ ‡è®°æŠ˜å 

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210724-1627090924313)

- è¿™ä¸ªè®¾ç½®æ–¹å¼ç›´æ¥åœ¨æºæ–‡ä»¶é‡Œé¢ç”¨æ³¨é‡Šçš„æ–¹å¼åšæ ‡è®°
- æœ‰ç‚¹æ˜¯ç‰¹åˆ«æ˜ç¡®
- ç¼ºç‚¹æ˜¯ä¸æ˜“ä¿®æ”¹
- è€Œä¸”åœ¨æºæ–‡ä»¶é‡Œé¢æ”¾é‚£ä¹ˆå¤šä¸ç›¸å…³çš„å†…å®¹
- å¢å¤§å­˜å‚¨ã€ä¼ è¾“ã€ç†è§£çš„å‹åŠ›

### diffæŠ˜å 
- ä¸»è¦ä½œç”¨æ˜¯æ‰¾åˆ°ä¸¤ä¸ªæ–‡ä»¶ä¸­ä¸åŒçš„éƒ¨åˆ†
- ç›¸åŒçš„éƒ¨åˆ†å°±ç»™ä»–æŠ˜å äº†
- è¿™ä¸ªä¹Ÿæ˜¯vimdiffä¸»è¦çš„foldmethod

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210724-1627091137262)


- è¿™ä¹ˆå¤šåˆ°åº•ç”¨å“ªä¸ªï¼Ÿ
	- indentï¼å°±å¾ˆå¥½
	- å¾ˆå¤šè¯­è¨€ç¼©è¿›å°±æ˜¯å±‚æ¬¡
	- ç¼©è¿›å°±ä»£è¡¨é€»è¾‘

## æ€»ç»“

- æŠ˜å æ–¹å¼å¾ˆå¤š
	- æˆ‘ä»¬ä¸€èˆ¬å°±ç”¨é»˜è®¤çš„å°±è¡Œ
	- indentä¹Ÿå¾ˆå¥½ç”¨
	- å‰ææ˜¯ç¼©è¿›è¯­æ³•ä¸¥æ ¼åˆ°ä½
- æ‰“å¼€å…³é—­
	- `zc`ã€`zo` æ˜¯æ‰“å¼€å…³é—­å½“å‰è¡Œ
	- `zm`ã€`zr` å¯ä»¥æ”¹å˜foldlevel
- é…åˆ` {range}`
	- `:{range}foldopen!` å¯ä»¥åœ¨èŒƒå›´å†…æ‰“å¼€è¡Œ
	- `:{range}foldclose!` å¯ä»¥åœ¨èŒƒå›´å†…å…³é—­è¡Œ
- ä½†æ˜¯è¿™ä¸ªæŠ˜å 
- ä¸€å…³é—­vimå°±æ²¡äº†
- è¿™ä¸ªæŠ˜å çŠ¶æ€å¯ä»¥ä¿å­˜ä½ä¹ˆï¼ŸğŸ¤”
- ä¸‹æ¬¡å†è¯´ï¼





