---
show: step
version: 1.0
enable_checker: true
---

# å…¨å±€å‘½ä»¤ global

## å›å¿†
- å¯ä»¥å®šä¹‰è‡ªå·±çš„å‘½ä»¤`command`
- ä¹Ÿå¯ä»¥æ‰§è¡Œè‡ªå®šä¹‰çš„å‘½ä»¤
- å¯ä»¥ä¿®æ”¹åˆ é™¤å‘½ä»¤
- å‘½ä»¤å¯ä»¥å¸¦ä¸Š
	- å‚æ•° `argument`
	- èŒƒå›´ `range`
- é™¤äº†è‡ªå®šä¹‰å‘½ä»¤ä¹‹å¤–
- ç³»ç»Ÿä¹Ÿæœ‰ä¸€äº›built-inçš„å‘½ä»¤
- ç³»ç»Ÿæœ‰ä»€ä¹ˆå¥½ç©çš„å‘½ä»¤ä¹ˆï¼ŸğŸ¤”

### globalå…¨å±€å‘½ä»¤

- `:h global`
- `:[range]global/{pattern}/{command}`
	- rangeæ˜¯æ‰§è¡Œçš„èŒƒå›´
		- `:1,$`
	- patternæ˜¯æœç´¢çš„æ¨¡å¼
	- commandæ‰§è¡Œçš„å‘½ä»¤

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210801-1627810156044)

- å¦‚æœåœ¨è¿™ä¸ªèŒƒå›´é‡Œé¢
- åŒ¹é…è¿™ä¸ªæ¨¡å¼
	- `:global`
- æˆ–è€…ä¸åŒ¹é…è¿™ä¸ªæ¨¡å¼
	- `:g!` æˆ– `:v`
- å°±æ‰§è¡Œè¿™ä¸ªå‘½ä»¤
- æˆ‘ä»¬æ¥çœ‹ä¸ªä¾‹å­

### å…ˆæœå†åˆ 

- æºä»£ç å¦‚ä¸‹


```
const oeasy = 1;
console.log("oeasy: ", oeasy);

const o2z = 2;
console.log("o2z: ", o2z);

const o3z = 3;
console.log("o3z: ", o3z);
```

- `:g/console/d`
	- æŠŠæ‰€æœ‰å¸¦`console`çš„è¡Œéƒ½åˆ é™¤
- `:g/const/d`
	- æŠŠæ‰€æœ‰å¸¦`const`çš„è¡Œéƒ½åˆ é™¤
	- æ•´è¡Œåˆ é™¤
	- åˆ å®Œä¹‹å<kbd>u</kbd>å›æ¥
- `:g/console/d _`
	- åˆ é™¤å¸¦`console`è¡Œä¹‹å
	- `_` çš„æ„æ€æ˜¯å°†ç»“æœæ”¾å…¥é»‘æ´å¯„å­˜å™¨
- `:g/console/d|update`
	- åˆ é™¤å®Œæˆä¹‹å
	- `|update` è¿›è¡Œä¿å­˜

### åˆ‡æ¢åˆ†å‰²ç¬¦

- `:g@console@d`
	- æŠŠåˆ†éš”ç¬¦ä»`/`å˜æˆ`@``
- ä»€ä¹ˆä¸èƒ½å½“åˆ†å‰²ç¬¦
	- å¤§å°å†™å­—ç¬¦
	- æ•°å­—
	- `"`, `|`,  `\`
- ä»€ä¹ˆå¯ä»¥å½“åˆ†éš”ç¬¦
    - `:g=console=d`
    - `:g?console?d`
- `:g+//+s/oeasy/o1z/g`
	- g 
		- globalå…¨å±€å‘½ä»¤
	- + 
		- åˆ†å‰²ç¬¦
	- //
		- æŸ¥æ‰¾çš„æ¨¡å¼ä¸º//
	- s/oeasy/o1z/g
		- sçš„æ„æ€æ˜¯subtitute
		- æŠŠè¿™äº›è¡Œä¸­çš„oeasyæ¢æˆo1z
		- å¹¶ä¸”æ˜¯globalæ›¿æ¢ï¼Œå…¨éƒ½æ›¿æ¢
		- å®Œæˆæ‰¹é‡æ›¿æ¢
	- æŠŠæ‰€æœ‰åŒ…å«//è¡Œä¸­ï¼ŒæŠŠoeasyå…¨éƒ¨æ›¿æ¢ä¸ºo1z

### åè½¬æ¨¡å¼

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210801-1627812732172)

- `:g/console/d`
	- æŠŠæ‰€æœ‰å¸¦`console`çš„è¡Œéƒ½åˆ é™¤
- `:v/console/d`
	- æŠŠæ‰€æœ‰ä¸å¸¦`console`çš„è¡Œéƒ½åˆ é™¤
- `:g!/console/d`
	- `g!`å’Œ`v`ä¸€æ ·

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210801-1627814988197)

### åŒ¹é…æ¨¡å¼

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210801-1627812732172)

- æˆ‘ä»¬çŒœçŒœä¸‹é¢çš„å‘½ä»¤ä¼šåˆ é™¤é‚£äº›è¡Œï¼Ÿ
- `:g/o2z\|o3z/d`
- `:g/[0-9]/d`æˆ–`:g/\d/d`

### åˆ é™¤ç©ºè¡Œ
- `:g/^$/d`
	- ^$å¼€å¤´ä¹‹åå°±æ˜¯ç»“æŸ
	- æ²¡æœ‰ä»»ä½•å­—ç¬¦çš„è¡Œ
	- å°±deleteåˆ æ‰
- `:g/^\s*$/d`
	- `^$`å¼€å¤´ç»“å°¾ä¹‹é—´åªæœ‰ç©ºæ ¼å’Œtab
	- æ²¡æœ‰ä»»ä½•å…¶ä»–å­—ç¬¦
	- å°±deleteåˆ æ‰

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210801-1627821441544)


### é…åˆèŒƒå›´range

- `:1,5g/console/d` 
	- ä»1åˆ°5è¡Œ
	- å‡ºç°consoleçš„è¡Œ
	- åˆ é™¤
- `:.,5g/console/d` 
	- ä»å½“å‰è¡Œåˆ°ç¬¬5è¡Œ
- `:3,.g/console/d` 
	- ä»3åˆ°å½“å‰è¡Œ
- `:3g/console/d` 
	- åªæœç´¢ç¬¬3è¡Œ

- ç‰¹å®šè¡Œ
	- . å½“å‰è¡Œ
	- $ æœ«è¡Œ
	- +n å½“å‰è¡Œä¹‹åçš„ç¬¬nè¡Œ

### å†æ¥ä¸€ä¸ª

```
const oneMillion = 1000000;
const oneThousand = 1000;
const one = 1;
```

- `:g/0\{3,6\}/d`
- å‡ºç°3åˆ°6ä¸ªé›¶çš„è¡Œ
- <kbd>u</kbd>å›æ¥
- å¯ä»¥æŠŠæ•°å€¼åˆ†åˆ«è°ƒæ•´ä¸€ä¸‹
	- `:g/0\{4,6\}/d`

### æ‰§è¡Œå‘½ä»¤command

- é™¤äº†dåˆ é™¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥æ‰§è¡Œnormalæ­£å¸¸æ¨¡å¼ä¸‹å‘½ä»¤

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210801-1627812732172)

- `:g/.*/normal A;`
	- `.*`ä»£è¡¨æœ‰0åˆ°ä»»æ„å¤šä¸ªéç©ºå­—ç¬¦
	- ç©ºè¡Œ`^$`æœ‰0ä¸ªå­—ç¬¦ä¹Ÿæ»¡è¶³
	- `normal A;` æ¯ä¸€è¡Œéƒ½åœ¨ç»“å°¾åŠ åˆ†å·;
- `:g/./normal A;`
	- `.`ä»£è¡¨æœ‰ä¸€ä¸ªå­—ç¬¦ï¼Œä»»æ„å­—ç¬¦éƒ½å¯ä»¥
	- ç©ºè¡Œ`^$`ä¸€ä¸ªå­—ç¬¦éƒ½æ²¡æœ‰ï¼Œä¸æ»¡è¶³
	- éç©ºè¡Œ `normal A;` åœ¨ç»“å°¾åŠ åˆ†å·;

### æ‰§è¡Œå®macro

```
const oeasy = 1
console.log("oeasy: ", oeasy);

const o2z = 2
console.log("o2z: ", o2z);

const o3z = 3
console.log("o3z: ", o3z);
```

- `qaA;<Esc>q`
	- å®šä¹‰ä¸€ä¸ªå®macroå«åša
	- açš„åŠŸèƒ½å°±æ˜¯A;<Esc>
	- åœ¨è¡Œå°¾æ’å…¥åˆ†å·ç„¶åé€€å‡ºå›åˆ°æ­£å¸¸æ¨¡å¼
- `:reg a`
	- æŸ¥çœ‹å®a
- `:g/const/normal @a`
	- `const` 
		- å¯¹äºå¯ä»¥åŒ¹é…`const`çš„è¡Œ
	- `normal @a`
		- æ­£å¸¸æ¨¡å¼ä¸‹æ‰§è¡Œå®a
- `:2,$g/const/normal @a`
	- `2,$`
		- ä»ç¬¬2è¡Œåˆ°æœ«è¡Œ
	- `const` 
		- å¯¹äºå¯ä»¥åŒ¹é…`const`çš„è¡Œ
	- `:normal @a`
		- æ­£å¸¸æ¨¡å¼ä¸‹æ‰§è¡Œå®a

### é€’å½’ä½¿ç”¨å…¨å±€å‘½ä»¤
```
const oeasy = 1
console.log("oeasy: ", oeasy);

const o2z = 2
console.log("o2z: ", o2z);

const o3z = 3
console.log("o3z: ", o3z);
```

- `:g/console/g/two/d`
	- å…ˆæœåŒ…å«consoleçš„æ‰€æœ‰è¡Œ
	- åœ¨æœç´¢ç»“æœä¸­æœo2z
	- æ‰¾åˆ°çš„ç»“æœåˆ é™¤
- <kbd>u</kbd>å›æ¥
- `:g/console/v/two/d`
	- å…ˆæœåŒ…å«consoleçš„æ‰€æœ‰è¡Œ
	- åœ¨æœç´¢ç»“æœä¸­æœä¸åŒ…å«o2zçš„
	- æ‰¾åˆ°çš„ç»“æœåˆ é™¤

### æ‰“å°å‘½ä»¤print

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210801-1627815114086)

- `:g/const/p`
	- æ‰¾åˆ°åŒ¹é…`const`æ¨¡å¼çš„è¡Œ
	- æ‰“å°print

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210801-1627815104352)

### ç§»åŠ¨å‘½ä»¤move

- `:g/^/m 0`
	- `^` è¡Œçš„å¼€å¤´ï¼Œæ‰€æœ‰çš„è¡Œéƒ½ç¬¦åˆï¼ŒåŒ…æ‹¬ç©ºè¡Œ
	- m ç§»åŠ¨ move
	- 0 ç§»åŠ¨åˆ°ç¬¬0è¡Œ æœ€åˆ
- æ¯ä¸€è¡Œéƒ½è¦æŒªåˆ°ç¬¬ä¸€è¡Œ
- æœ€åä¸€è¡Œæœ€åæ‰§è¡Œ
- æ•´ä½“å°±æ˜¯ä¸Šä¸‹é¢ å€’

### å¤åˆ¶å‘½ä»¤copy æˆ– t

```
const oeasy = 1
console.log("oeasy: ", oeasy);
// TODO oeasy

const o2z = 2
console.log("o2z: ", o2z);
// TODO o2z

const o3z = 3
console.log("o3z: ", o3z);
// TODO o3z
```

- `:g/TODO/t $`
	- åŒ…å«TODOçš„è¡Œé€‰ä¸­
	- æ‰§è¡Œt $ æ‹·è´åˆ°æœ«è¡Œ

- `:g/TODO/m 0`
	- æŠŠTODOè¡Œéƒ½ç§»åŠ¨åˆ°æœ€ä¸Šé¢

### æ’åºå‘½ä»¤sort

```
const arrayA = [
  "h",
  "b",
  "f",
  "d",
  "e",
  "a",
  "c",
]
```

- `:g/\[/+1,/\]/-1sort`
- åœ¨è¿™ä¸ªä¸­æ‹¬å·çš„èŒƒå›´å†…
- æ’åº


## æ€»ç»“
- è¿™æ¬¡ç ”ç©¶çš„æ˜¯global
- `:[range]global/{pattern}/{command}`
	- rangeæ˜¯æ‰§è¡Œçš„èŒƒå›´
	- patternæ˜¯æœç´¢çš„æ¨¡å¼
	- commandæ‰§è¡Œçš„å‘½ä»¤
- å‘½ä»¤æœ‰å¾ˆå¤š
	- d åˆ é™¤
	- m ç§»åŠ¨
	- t æ‹·è´
	- p æ‰“å°
	- s æ›¿æ¢
	- sort æ’åº
	- update æ›´æ–°
- globalæ˜¯å¾ˆå¥½ç”¨çš„å†…éƒ¨å‘½ä»¤
- vimè¿˜å¯ä»¥æ‰§è¡Œå¤–éƒ¨å‘½ä»¤å‘¢ï¼
- æ€ä¹ˆç©å‘¢ï¼ŸğŸ¤”
- ä¸‹æ¬¡å†è¯´ï¼




